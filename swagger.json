{"swagger":"2.0","info":{"version":"v1","title":"Api PagueMenos Farmácia Popular"},"basePath":"/apifarmaciapopularally","paths":{"/api/Autorizacao/{nuAutorizacao}":{"delete":{"tags":["Autorizacao"],"summary":"Estorno de uma autorização existente, pelo número gerado na obtenção da pré-autorização pelo endpoint de solicitação da mesma.","operationId":"EstornarAutorizacaoAsync","consumes":[],"produces":[],"parameters":[{"name":"nuAutorizacao","in":"path","description":"Número da pré-autorização, no padrão: 000.000.000.000.000 .","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Autorizacao/{usuarioFarmaciaId}/{cnpj}/{nuCpf}/{usuarioMatricula}":{"post":{"tags":["Autorizacao"],"summary":"Cadastro de uma autorização, na fase de pré-autorização, para o caso de ter sido gerada por meio da loja (comunicação direta com DataSUS).","operationId":"CadastrarNovaAutorizacaoAsync","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":[],"parameters":[{"name":"usuarioFarmaciaId","in":"path","description":"Id do usuário farmácia que está solicitando o cadastro da pré-autorização.","required":true,"type":"integer","format":"int32"},{"name":"cnpj","in":"path","description":"CNPJ da loja que está provendo farmácia popular.","required":true,"type":"string"},{"name":"nuCpf","in":"path","description":"CPF do cliente farmácia popular.","required":true,"type":"string"},{"name":"usuarioMatricula","in":"path","description":"Matrícula do usuário que está logado no balcão.","required":true,"type":"string"},{"name":"autorizacaoUsuarioMedicamentos","in":"body","description":"Objeto de informações da autorização a ser cadastrada, bem como do usuário e dos medicamentos.","required":false,"schema":{"$ref":"#/definitions/AutorizacaoUsuarioMedicamentos"}}],"responses":{"200":{"description":"Success"}}}},"/api/Confirmacao/{nuAutorizacao}/{nuCupomFiscal}":{"get":{"tags":["Confirmacao"],"summary":"Confirmação da autorização pré-gerada no POST de Solicitação, bem como vinculação do cupom à autorização (junto ao serviço Farmácia Popular do DATASUS).","operationId":"ConfirmarAutorizacaoAsync","consumes":[],"produces":[],"parameters":[{"name":"nuAutorizacao","in":"path","description":"Número da pré-autorização, no padrão: 000.000.000.000.000 .","required":true,"type":"string"},{"name":"nuCupomFiscal","in":"path","description":"Número do cupom a ser vinculado.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Confirmacao/{nuAutorizacao}/{nuCupomFiscal}/recebimento":{"get":{"tags":["Confirmacao"],"summary":"Confirmação de recebimento de venda (junto ao serviço Farmácia Popular do DATASUS).","operationId":"ConfirmarRecebimentoAsync","consumes":[],"produces":[],"parameters":[{"name":"nuAutorizacao","in":"path","description":"Número da pré-autorização, no padrão: 000.000.000.000.000 .","required":true,"type":"string"},{"name":"nuCupomFiscal","in":"path","description":"Número do cupom a ser vinculado.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Produto/{tipo}/{tabela}/{ean}/{cpf}/{cnpj}":{"get":{"tags":["Produto"],"summary":"Captura de preço epharma de produto, por EAN, bem como CPF de cliente e CNPJ da filial.","operationId":"CapturarPrecoAsync","consumes":[],"produces":[],"parameters":[{"name":"tipo","in":"path","description":"Tipo.","required":true,"type":"integer","format":"int32"},{"name":"tabela","in":"path","description":"Tabela.","required":true,"type":"integer","format":"int32"},{"name":"ean","in":"path","description":"Código de barras do produto.","required":true,"type":"string"},{"name":"cpf","in":"path","description":"CPF do cliente.","required":true,"type":"string"},{"name":"cnpj","in":"path","description":"CNPJ da filial.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao":{"get":{"tags":["Solicitacao"],"summary":"Captura de lista de autoriações existentes já geradas pelos sistemas Pague Menos.","operationId":"CapturarTodasAutorizacoesAsync","consumes":[],"produces":[],"parameters":[],"responses":{"200":{"description":"Success"}}},"post":{"tags":["Solicitacao"],"summary":"Solicitação para obter pré-autorização da Farmácia Popular.","operationId":"ObterPreAutorizacaoAsync","consumes":["application/json-patch+json","application/json","text/json","application/*+json"],"produces":[],"parameters":[{"name":"solicitacaoFarmacia","in":"body","description":"Objeto para solicitação, contemplando dados da farmácia, da receita, bem como paciente e medicamento.","required":false,"schema":{"$ref":"#/definitions/SolicitacaoFarmacia"}}],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao/{nuAutorizacao}":{"get":{"tags":["Solicitacao"],"summary":"Captura de autorização pelo número gerado na obtenção da pré-autorização pelo endpoint de solicitação da mesma.","operationId":"CapturarAutorizacaoAsync","consumes":[],"produces":[],"parameters":[{"name":"nuAutorizacao","in":"path","description":"Número da pré-autorização, no padrão: 000.000.000.000.000 .","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao/{nuAutorizacao}/status":{"get":{"tags":["Solicitacao"],"summary":"Verificação de existência da autorização pelo número da autorização, tal qual nas capturas de autorização.","operationId":"VerificarAutorizacaoAsync","consumes":[],"produces":[],"parameters":[{"name":"nuAutorizacao","in":"path","description":"Número da pré-autorização, no padrão: 000.000.000.000.000 .","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao/{nuAutorizacao}/{nuCupomFiscal}":{"get":{"tags":["Solicitacao"],"summary":"Captura de autorização pelo número gerado na obtenção da pré-autorização pelo endpoint de solicitação da mesma, e pelo número do cupom a qual a autorização fora vinculada na fase de confirmação da pré-autorização.","operationId":"CapturarAutorizacaoPorNuCupomFiscalAsync","consumes":[],"produces":[],"parameters":[{"name":"nuAutorizacao","in":"path","description":"Número da pré-autorização, no padrão: 000.000.000.000.000 .","required":true,"type":"string"},{"name":"nuCupomFiscal","in":"path","description":"Número do cupom vinculado na fase de confirmação da pré-autorização.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao/{property}/{value}/filtro":{"get":{"tags":["Solicitacao"],"summary":"Captura de autorização por definição de propriedade pré-mapeada pelo objeto de autorização (vide corpo das requisições dos demais endpoints de Solicitações de pré-autorização) e seu respectivo valor.","operationId":"CapturarAutorizacoesPorValorDePropriedade","consumes":[],"produces":[],"parameters":[{"name":"property","in":"path","description":"Propriedade a ser usada como critério de captura de autorizações.","required":true,"type":"string"},{"name":"value","in":"path","description":"Valor para filtragem da captura.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao/novoCodigo":{"get":{"tags":["Solicitacao"],"summary":"Captura de novo código de solicitação farmácia, para uso de envio de solcitação de pré-autorização direta do balcão para o DataSUS.","operationId":"CapturarNovaCoSolicitacaoFarmaciaAsync","consumes":[],"produces":[],"parameters":[],"responses":{"200":{"description":"Success"}}}},"/api/Solicitacao/{coSolicitacaoFarmacia}/{inAutorizacaoSolicitacao}":{"put":{"tags":["Solicitacao"],"summary":"Atualização de log de pré-autorização.","operationId":"AtualizarLogPreAutorizacaoAsync","consumes":[],"produces":[],"parameters":[{"name":"coSolicitacaoFarmacia","in":"path","description":"Código de solicitação farmácia.","required":true,"type":"string"},{"name":"inAutorizacaoSolicitacao","in":"path","description":"Código de retorno de autorização de solicitação.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/api/UsuarioFarmacia/{cnpj}":{"get":{"tags":["UsuarioFarmacia"],"summary":"Captura de informações de usuário farmácia por CNPJ de loja.","operationId":"CapturarUsuarioFarmaciaPorCnpjAsync","consumes":[],"produces":[],"parameters":[{"name":"cnpj","in":"path","description":"CNPJ de loja usado como parâmetro para consulta de Usuário Farmácia.","required":true,"type":"string"}],"responses":{"200":{"description":"Success"}}}}},"definitions":{"AutorizacaoUsuarioMedicamentos":{"type":"object","properties":{"autorizacaoDTO":{"$ref":"#/definitions/AutorizacaoDTO"},"usuarioDTO":{"$ref":"#/definitions/UsuarioFarmaciaDTO"},"arrMedicamentoDTO":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MedicamentoDTO"}}}},"AutorizacaoDTO":{"type":"object","properties":{"arrMedicamentoDTO":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MedicamentoDTO"}},"coSolicitacaoFarmacia":{"type":"string"},"descMensagemErro":{"type":"string"},"inAutorizacaoSolicitacao":{"type":"string"},"noPessoa":{"type":"string"},"nuAutorizacao":{"type":"string"}}},"UsuarioFarmaciaDTO":{"type":"object","properties":{"senhaFarmacia":{"type":"string"},"senhaVendedor":{"type":"string"},"usuarioFarmacia":{"type":"string"},"usuarioVendedor":{"type":"string"}}},"MedicamentoDTO":{"type":"object","properties":{"coCodigoBarra":{"type":"string"},"dsUnidApresentacao":{"type":"string"},"inAutorizacaoEstorno":{"type":"string"},"inAutorizacaoMedicamento":{"type":"string"},"qtAutorizada":{"format":"double","type":"number"},"qtDevolvida":{"format":"double","type":"number"},"qtEstornada":{"format":"double","type":"number"},"qtPrescrita":{"format":"double","type":"number"},"qtSolicitada":{"format":"double","type":"number"},"statusTransacao":{"type":"string"},"vlPrecoSubsidiadoMS":{"format":"double","type":"number"},"vlPrecoSubsidiadoPaciente":{"format":"double","type":"number"},"vlPrecoSubsidiadoPacientePosEstorno":{"format":"double","type":"number"},"vlPrecoVenda":{"format":"double","type":"number"},"vlrSubsidiadoMSPosEstorno":{"format":"double","type":"number"},"vlrTotalVendaPosEstorno":{"format":"double","type":"number"}}},"SolicitacaoFarmacia":{"type":"object","properties":{"solicitacao":{"$ref":"#/definitions/SolicitacaoDTO"},"usuarioFarmacia":{"$ref":"#/definitions/UsuarioFarmaciaDTO"},"usuarioMatricula":{"type":"string"},"dnaEstacao":{"type":"string"}}},"SolicitacaoDTO":{"type":"object","properties":{"arrMedicamentoDTO":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MedicamentoDTO"}},"coSolicitacaoFarmacia":{"type":"string"},"dnaEstacao":{"type":"string"},"dtEmissaoReceita":{"format":"date-time","type":"string"},"dtEmissaoReceitaAsString":{"type":"string"},"nuCnpj":{"type":"string"},"nuCpf":{"type":"string"},"nuCrm":{"type":"string"},"sgUfCrm":{"type":"string"}}}}}